<!doctype html>
<html>
  <head>
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-store, must-revalidate" />
    <meta http-equiv="expires" content="Wed, 26 Feb 1997 08:21:57 GMT" />
    <meta http-equiv="expires" content="0" />
    <meta charset="UTF-8" />
    <meta
      name="google-site-verification"
      content="LxuOudJbIfQC4XGqAbPdZp_UAzL0IHJuWJWyp2ISwHo"
    />
    <meta name="baidu-site-verification" content="code-9XQnizEi5v" />
    <meta name="sogou_site_verification" content="6zVRNtO7pp" />
    <meta name="keywords" content="中國,中国,時辰,时辰,計時法,计时法,鐘,钟" />
    <meta
      name="description"
      content="提供傳統中國計時法的顯示服務和五個傳統中國時區的標準時間，適合用作屏幕保護、時間顯示、占卜預測等。"
    />
    <title>中國時辰鐘</title>
    <style type="text/css">
      html,
      body {
        max-width: 100%;
        overflow-x: hidden;
      }
      body.clockbg {
        padding-bottom: 80px !important;
        box-sizing: border-box;
      }
      .canvasbox {
        background: #ffffff;
        border-radius: 50%;
        overflow: hidden;
      }
      .titletime {
        font-size: 16px;
        font-weight: bold;
        margin: 10px 0px;
      }
      .clockbg {
        background: url(images/bg2.jpg);
        width: 100%;
        height: 100%;
        min-height: 100vh;
        background-repeat: no-repeat;
        background-size: 100% 100%;
        position: relative;
      }
      .clockstyle {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        width: 95%;
        margin: 20px auto;
        position: relative;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        min-height: 400px;
        z-index: 11;
        padding: 20px;
        border: 1px solid #008cd5;
        box-shadow: inset 0px 5px 8px rgba(255, 255, 255, 0.5);
        align-content: center;
      }
      .clockModule {
        flex: 0 1 250px;
        height: auto;
        text-align: center;
        margin: 30px;
        color: #ffffff;
        font-size: 16px;
        font-weight: bold;
        text-shadow: 0px 3px 5px rgba(0, 0, 0, 1);
      }
      .titledate {
        font-size: 32px;
        text-align: center;
        color: #ffffff;
        font-weight: bold;
        text-shadow: 0px 3px 5px rgba(0, 0, 0, 1);
        position: relative;
        top: 15%;
      }
      .fanhui {
        background: url(images/cz2.png);
        position: absolute;
        z-index: 11;
        right: 20px;
        bottom: 20px;
        width: 120px;
        height: 40px;
        background-size: 100% 100%;
        background-repeat: no-repeat;
      }
      .radio-group {
        display: flex;
        flex-wrap: wrap;
      }
      .radio-item {
        margin-right: 15px;
        display: flex;
        align-items: center;
        white-space: nowrap;
      }
      .settings-btn {
        position: absolute;
        z-index: 11;
        left: 20px;
        bottom: 20px;
        width: 40px;
        height: 40px;
        color: #ffffff;
        cursor: pointer;
        filter: drop-shadow(0px 3px 5px rgba(0, 0, 0, 1));
        transition: transform 0.5s ease;
      }
      .settings-btn:hover {
        transform: rotate(90deg);
        color: #008cd5;
      }
      .close-btn-style {
        cursor: pointer;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 50%;
        color: #ffffff;
        border: 1px solid rgba(255, 255, 255, 0.3);
        transition: all 0.3s ease;
        box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.3);
      }
      .close-btn-style:hover {
        background: #008cd5;
        border-color: #008cd5;
        transform: scale(1.1);
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.5);
      }
      .close-btn-style svg {
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.5));
      }
    </style>
    <link rel="shortcut icon" href="images/icon.ico" type="image/x-icon" />
  </head>
  <body class="clockbg" id="clockbg">
    <div id="title_prompt" class="titledate">
      <h1 style="font-size: 50px">中國時辰鐘</h1>
    </div>
    <div class="clockstyle" id="clockstyle">
      <div id="clockModule1" class="clockModule"></div>
      <div id="clockModule2" class="clockModule"></div>
      <div id="clockModule3" class="clockModule"></div>
      <div id="clockModule4" class="clockModule"></div>
      <div id="clockModule5" class="clockModule"></div>
    </div>
    <div id="select_time_zone" style="display: none">
      <div
        style="
          display: flex;
          justify-content: center;
          align-items: center;
          gap: 15px;
          margin-bottom: 25px;
        "
      >
        <h2
          style="
            margin: 0;
            color: #ffffff;
            text-shadow: 0px 3px 5px rgba(0, 0, 0, 0.8);
          "
        >
          選擇時區
        </h2>
        <div id="close-timezone-btn" class="close-btn-style" title="關閉">
          <svg
            viewBox="0 0 24 24"
            width="18"
            height="18"
            stroke="currentColor"
            stroke-width="3"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </div>
      </div>
      <form
        id="timezone_form"
        style="
          display: flex;
          justify-content: center;
          align-items: center;
          flex-wrap: wrap;
        "
      >
        <div class="radio-group">
          <div class="radio-item">
            <input
              type="radio"
              checked
              id="wuda"
              name="timezone"
              value="all"
              onchange="change_timezone(this.value)"
            />
            <label for="wuda">五大時區</label>
          </div>
          <div class="radio-item">
            <input
              type="radio"
              id="kunlun"
              name="timezone"
              value="5.5"
              onchange="change_timezone(this.value)"
            />
            <label for="kunlun">崑崙時區 (UTC+05:30)</label>
          </div>
          <div class="radio-item">
            <input
              type="radio"
              id="xinzang"
              name="timezone"
              value="6"
              onchange="change_timezone(this.value)"
            />
            <label for="xinzang">新藏時區 (UTC+06:00)</label>
          </div>
          <div class="radio-item">
            <input
              type="radio"
              id="longshu"
              name="timezone"
              value="7"
              onchange="change_timezone(this.value)"
            />
            <label for="longshu">隴蜀時區 (UTC+07:00)</label>
          </div>
          <div class="radio-item">
            <input
              type="radio"
              id="zhongyuan"
              name="timezone"
              value="8"
              onchange="change_timezone(this.value)"
            />
            <label for="zhongyuan">中原時區 (UTC+08:00)</label>
          </div>
          <div class="radio-item">
            <input
              type="radio"
              id="changbai"
              name="timezone"
              value="8.5"
              onchange="change_timezone(this.value)"
            />
            <label for="changbai">長白時區 (UTC+08:30)</label>
          </div>
          <div class="radio-item">
            <input
              type="radio"
              id="custom"
              name="timezone"
              value="custom"
              onchange="
                change_timezone(document.getElementById('utc-offset').value)
              "
              disabled
            />
            <label for="custom">自定義時區</label>
          </div>
        </div>
        <div id="custom-select-container" style="display: none">
          <label for="utc-offset">選擇自定義時區：</label>
          <select id="utc-offset" name="custom_offset"></select>
        </div>
      </form>
      <img src="images/中華民國全圖/中國時區圖.svg" style="width: 100%; height: auto" />
    </div>
    <div class="settings-btn" id="settings-btn">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </div>
    <a target="_blank" href="/">
      <div class="fanhui"></div>
    </a>
    <script type="module">
      const all_china_time_zones = [
        {
          timezone: "5.5",
          bgcolor: "#000000",
          Minutehand: "#ffffff",
          Hourhand: "#ffffff",
          zscolor: "#f00",
          cityName: "崑崙時區 (UTC+05:30)",
          textcolor: "#ffffff",
          brimcolor: "#f00",
          cityEnglish: "喀什",
          font: "18px Arial",
        },
        {
          timezone: "6",
          bgcolor: "#000000",
          Minutehand: "#ffffff",
          Hourhand: "#ffffff",
          zscolor: "#f00",
          cityName: "新藏時區 (UTC+06:00)",
          textcolor: "#ffffff",
          brimcolor: "#f00",
          cityEnglish: "拉薩、烏魯木齊",
          font: "18px Arial",
        },
        {
          timezone: "7",
          bgcolor: "#000000",
          Minutehand: "#ffffff",
          Hourhand: "#ffffff",
          zscolor: "#f00",
          cityName: "隴蜀時區 (UTC+07:00)",
          textcolor: "#ffffff",
          brimcolor: "#f00",
          cityEnglish: "成都、重慶、貴陽、銀川",
          font: "18px Arial",
        },
        {
          timezone: "8",
          cw: 200,
          ch: 200,
          bgcolor: "#25f500",
          cityName: "中原時區 (UTC+08:00)",
          cityEnglish: "南京、北平、上海、臺北",
          font: "18px Arial",
        },
        {
          timezone: "8.5",
          cw: 200,
          ch: 200,
          cityName: "長白時區 (UTC+08:30)",
          cityEnglish: "綏化、哈爾濱、吉林",
          font: "18px Arial",
        },
      ];
      import { clockModule } from "./js/clock.js";
      const clock_module = new clockModule({
        Module: [
          "#clockModule1",
          "#clockModule2",
          "#clockModule3",
          "#clockModule4",
          "#clockModule5",
        ],
        clockparameter: all_china_time_zones,
      });
      function checkMultiLine() {
        const container = document.getElementById("clockstyle");
        const clocks = container.getElementsByClassName("clockModule");
        if (clocks.length < 2) return false;
        const firstTop = clocks[0].offsetTop;
        let isMultiLine = false;
        for (let i = 1; i < clocks.length; i++) {
          if (clocks[i].offsetTop > firstTop) {
            isMultiLine = true;
            break;
          }
        }
        return isMultiLine;
      }
      const radioButtons = document.querySelectorAll('input[name="timezone"]');
      const customContainer = document.getElementById(
        "custom-select-container",
      );
      const utcSelect = document.getElementById("utc-offset");
      function generateUTCOptions(current_timezone) {
        for (let h = -12; h <= 14; h += 0.25) {
          const totalMinutes = h * 60;
          const hours = Math.floor(Math.abs(totalMinutes) / 60);
          const minutes = Math.abs(totalMinutes) % 60;
          const sign = h >= 0 ? "+" : "-";
          const displayTime = `UTC${sign}${hours.toString().padStart(2, "0")}:${minutes.toString().padStart(2, "0")}`;
          const option = document.createElement("option");
          option.value = h.toString();
          option.textContent = displayTime;
          if (option.value === current_timezone) {
            option.selected = true;
          }
          utcSelect.appendChild(option);
        }
        utcSelect.addEventListener("change", function (event) {
          change_timezone(event.target.value);
        });
        document.getElementById("custom").disabled = false;
      }
      radioButtons.forEach((radio) => {
        radio.addEventListener("change", (e) => {
          if (e.target.value === "custom") {
            customContainer.style.display = "block";
          } else {
            customContainer.style.display = "none";
          }
        });
      });
      const clock_styles = document.getElementById("clockstyle");
      const clock_module_template = "#clockModule?";
      const clock_style_template =
        '<div id="clockModule?" class="clockModule"></div>';
      const time_zone_template = {
        timezone: "",
        cw: 200,
        ch: 200,
        cityName: "境外",
        bgcolor: "#a9d0f5",
        cityEnglish: "",
        font: "18px Arial",
      };
      function corresponding_utc_string(timezone) {
        const timezone_num = new Number(timezone);
        let sign = "+";
        if (timezone_num < 0) {
          sign = "-";
        }
        const abs_timezone_num = Math.abs(timezone_num);
        const abs_timezone_int = Math.floor(abs_timezone_num);
        const abs_timezone_part = abs_timezone_num - abs_timezone_int;
        const abs_timezone =
          abs_timezone_int.toString().padStart(2, "0") +
          ":" +
          (abs_timezone_part * 60).toString().padStart(2, "0");
        return "UTC" + sign + abs_timezone;
      }
      const timezone_form = document.getElementById("timezone_form");
      function switch_setting(timezone) {
        const radio_items = timezone_form.children[0].children;
        let have_checked = false;
        for (const child of radio_items) {
          const radio = child.children[0];
          if (radio.value === timezone) {
            radio.checked = true;
            have_checked = true;
          } else {
            radio.checked = false;
          }
        }
        if (have_checked) {
          return;
        }
        radio_items[radio_items.length - 1].children[0].checked = true;
        const utc_offset = timezone_form.children[1].children[1].children;
        for (const option of utc_offset) {
          if (option.value === timezone) {
            option.selected = true;
          } else {
            option.selected = false;
          }
        }
        timezone_form.children[1].style.display = "block";
      }
      function change_timezone(timezone) {
        let new_time_zones = null;
        if ("all" === timezone) {
          new_time_zones = all_china_time_zones;
        } else {
          for (let i = 0; i < all_china_time_zones.length; ++i) {
            if (all_china_time_zones[i].timezone === timezone) {
              new_time_zones = [all_china_time_zones[i]];
              break;
            }
          }
          if (null === new_time_zones) {
            const time_zone_copy = { ...time_zone_template };
            time_zone_copy.timezone = timezone;
            if (current_timezone === timezone) {
              time_zone_copy.cityName = "當地時區";
            } else {
              time_zone_copy.cityName = "境外";
            }
            time_zone_copy.cityEnglish = corresponding_utc_string(timezone);
            new_time_zones = [time_zone_copy];
          }
        }
        if (clock_module.destroy) {
          clock_module.destroy();
        }
        clock_module.par.Module.length = 0;
        clock_styles.innerHTML = "";
        for (let i = 0; i < new_time_zones.length; ++i) {
          const index = (i + 1).toString();
          clock_module.par.Module.push(
            clock_module_template.replace("?", index),
          );
          const fragment = document
            .createRange()
            .createContextualFragment(clock_style_template.replace("?", index));
          const node = fragment.firstElementChild;
          clock_styles.appendChild(node);
        }
        clock_module.par.clockparameter = new_time_zones;
        clock_module.show(clock_module.par, clock_module);
        localStorage.setItem("default_timezone", timezone);
      }
      window.change_timezone = change_timezone;
      const default_timezone = localStorage.getItem("default_timezone");
      const select_time_zone = document.getElementById("select_time_zone");
      document
        .getElementById("settings-btn")
        .addEventListener("click", function () {
          if (select_time_zone.style.display === "block") {
            select_time_zone.style.display = "none";
          } else {
            select_time_zone.style.display = "block";
          }
        });
      document
        .getElementById("close-timezone-btn")
        .addEventListener("click", function () {
          document.getElementById("select_time_zone").style.display = "none";
        });
      import { get_current_timezone } from "./js/timezone.js";
      let current_timezone = null;
      async function init() {
        current_timezone = await get_current_timezone();
        generateUTCOptions(current_timezone);
        if (null !== default_timezone) {
          change_timezone(default_timezone);
          switch_setting(default_timezone);
        } else if (checkMultiLine()) {
          change_timezone(current_timezone);
          switch_setting(current_timezone);
        }
      }
      init();
    </script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-F0QTMNSQ6P"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-F0QTMNSQ6P");
    </script>
  </body>
</html>
